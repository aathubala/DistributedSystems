{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\GitHub\\\\Distributed System\\\\DistributedSystems\\\\Instructor-learnerService\\\\frontend\\\\src\\\\components\\\\Buyer\\\\BuyerSubComponents\\\\Shop.js\",\n    _s = $RefreshSig$();\n\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { List, Divider, Empty, Button, notification, message } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport Api from \"../Cart/api\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport axios from \"axios\";\nimport { deleteFromCart } from \"../../../actions/cartAction\";\nimport { useDispatch } from 'react-redux';\nimport { placeOrder } from '../../../actions/orderActions';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Shop = () => {\n  _s();\n\n  const [data, setData] = useState([]);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setData([...Api.values()]);\n  });\n  let total = 0;\n  data.filter(el => total += Number(el === null || el === void 0 ? void 0 : el.price));\n\n  const deleteHandler = value => {\n    try {\n      dispatch(deleteFromCart(value));\n      Api.delete(value === null || value === void 0 ? void 0 : value._id);\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  async function handleToken(token, addresses) {\n    const email = localStorage.getItem(\"email\");\n    dispatch(placeOrder(token, total));\n    await axios.post(\"https://ry7v05l6on.sse.codesandbox.io/checkout\", //third party payment gateway\n    {\n      token\n    });\n    await axios.post(\"/api/auth/payment\", {\n      email,\n      total\n    });\n    notification.info({\n      message: \"Notification\",\n      description: \"Success! Check email for details\",\n      placement: \"top\"\n    });\n    setTimeout(() => window.location.reload(), 3000);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Divider, {\n      orientation: \"left\",\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n      children: /*#__PURE__*/_jsxDEV(List, {\n        style: {\n          width: \"50%\"\n        },\n        children: data.length === 0 ? /*#__PURE__*/_jsxDEV(Empty, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this) : data.map(value => /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(List.Item, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Course Name : \", value === null || value === void 0 ? void 0 : value.itemName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Price : Rs. \", value === null || value === void 0 ? void 0 : value.price, \".00\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/uploads/\" + (value === null || value === void 0 ? void 0 : value.photo),\n                style: {\n                  width: \"100px\",\n                  height: \"100px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                style: {\n                  background: \"red\",\n                  color: \"white\"\n                },\n                onClick: () => deleteHandler(value),\n                children: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {\n      orientation: \"right\",\n      children: [\"Sub Total = Rs. \", total, \".00\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n      children: total !== 0 && /*#__PURE__*/_jsxDEV(StripeCheckout, {\n        stripeKey: \"pk_test_GlFtmasU7tmBohUIk7vMbEnf00NA3VYaa0\",\n        token: handleToken,\n        amount: Number(total) / 370 * 100,\n        name: \"Agri Product Online Purchasing Platform\",\n        billingAddress: true,\n        shippingAddress: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Shop, \"7CiG9f1oiB9j139bjDeBm4jyQ34=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Shop;\nexport default Shop;\n\nvar _c;\n\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"names":["DeleteOutlined","List","Divider","Empty","Button","notification","message","useEffect","useState","Api","StripeCheckout","axios","deleteFromCart","useDispatch","placeOrder","Shop","data","setData","dispatch","values","total","filter","el","Number","price","deleteHandler","value","delete","_id","error","alert","handleToken","token","addresses","email","localStorage","getItem","post","info","description","placement","setTimeout","window","location","reload","width","length","map","itemName","photo","height","background","color"],"sources":["C:/Users/ASUS/Documents/GitHub/Distributed System/DistributedSystems/Instructor-learnerService/frontend/src/components/Buyer/BuyerSubComponents/Shop.js"],"sourcesContent":["import { DeleteOutlined } from \"@ant-design/icons\";\r\nimport { List, Divider, Empty, Button, notification, message } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Api from \"../Cart/api\";\r\nimport StripeCheckout from \"react-stripe-checkout\";\r\nimport axios from \"axios\";\r\nimport { deleteFromCart } from \"../../../actions/cartAction\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { placeOrder } from '../../../actions/orderActions';\r\n\r\n\r\nconst Shop = () => {\r\n  const [data, setData] = useState([]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setData([...Api.values()]);\r\n  });\r\n\r\n  let total = 0;\r\n\r\n  data.filter((el) => (total += Number(el?.price)));\r\n\r\n  const deleteHandler = (value) => {\r\n    try {\r\n      dispatch(deleteFromCart(value))\r\n      Api.delete(value?._id);\r\n    } catch (error) {\r\n      alert(error);\r\n    }\r\n  };\r\n\r\n  async function handleToken(token, addresses) {\r\n    const email = localStorage.getItem(\"email\");\r\n    dispatch(placeOrder(token, total))\r\n    await axios.post(\r\n      \"https://ry7v05l6on.sse.codesandbox.io/checkout\", //third party payment gateway\r\n      { token }\r\n    );\r\n    await axios.post(\"/api/auth/payment\", { email, total });\r\n\r\n    notification.info({\r\n      message: \"Notification\",\r\n      description: \"Success! Check email for details\",\r\n      placement: \"top\",\r\n    });\r\n    setTimeout(() => window.location.reload(), 3000);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Divider orientation=\"left\">Your Cart</Divider>\r\n      <center>\r\n        <List style={{ width: \"50%\" }}>\r\n          {data.length === 0 ? (\r\n            <Empty />\r\n          ) : (\r\n            data.map((value) => (\r\n              <>\r\n                <List.Item>\r\n                  <div>\r\n                    <p>Course Name : {value?.itemName}</p>\r\n                    <p>Price : Rs. {value?.price}.00</p>\r\n                    <img\r\n                      src={\"/uploads/\" + value?.photo}\r\n                      style={{ width: \"100px\", height: \"100px\" }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <Button\r\n                      style={{ background: \"red\", color: \"white\" }}\r\n                      onClick={() => deleteHandler(value)}\r\n                    >\r\n                      <DeleteOutlined />\r\n                    </Button>\r\n                  </div>\r\n                </List.Item>\r\n                <Divider />\r\n              </>\r\n            ))\r\n          )}\r\n        </List>\r\n      </center>\r\n      <Divider orientation=\"right\">Sub Total = Rs. {total}.00</Divider>\r\n      <center>\r\n        {total !== 0 && (\r\n          <StripeCheckout\r\n            stripeKey=\"pk_test_GlFtmasU7tmBohUIk7vMbEnf00NA3VYaa0\"\r\n            token={handleToken}\r\n            amount={(Number(total) / 370) * 100}\r\n            name=\"Agri Product Online Purchasing Platform\"\r\n            billingAddress\r\n            shippingAddress\r\n          />\r\n        )}\r\n      </center>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}